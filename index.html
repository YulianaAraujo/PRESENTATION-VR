<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>ROTOSCOPIA</title>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.3.js"></script>
    </head>
    <body>
        <!-- <a-scene sound="src: #presentacion;  autoplay: true"> -->
        <a-scene>   
            <a-assets>
                <!-- background -->
                <img id="background" alt="fondo" src="./assets/background.jpg" />
                <!-- Dispositivas -->
                <img id="D0" alt="inicio" src="./assets/Rotoscopia.jpg" />
                <img id="D1" alt="primera diapositiva" src="./assets/Problemadecomunicación.jpg" />
                <img id="D2" alt="segunda diapositiva" src="./assets/Mapa de asociatividad.jpg" />
                <img id="D3" alt="tercera diapositiva" src="./assets/Referentes.jpg" />>
                <img id="D4" alt="cuarta diapositiva" src="./assets/Conceptos.jpg" />
                <img id="D5" alt="quinta diapositiva" src="./assets/Storyboard.jpg" />

                <!-- problematica -->
                <img id="PC1" alt="pregunta filosofica" src="./assets/Simulación.jpg" />>
                <img id="PC2" alt="historia del arte" src="./assets/Cubismo.jpg" />

                <!-- storyboard --> 
                <img id="SB1" alt="historia del arte" src="./assets/sb1.png" />
                <img id="SB2" alt="historia del arte" src="./assets/sb2.png" />

                <!-- controls -->
                <img id="play" alt="play" src="./assets/play.png" />
                <img id="pause" alt="pause" src="./assets/pausa.png" />
                <img id="arrow" alt="next" src="./assets/arrow.jpg" />


                <!-- audios -->
                <audio id="presentacion" src="./assets/audio/presentacion.mp3" preload="auto"></audio>
                <audio id="instruccion1" src="./assets/audio/problemaintruccion.mp3" preload="auto"></audio>
                <audio id="instruccion2" src="./assets/audio/mapaintruccion.mp3" preload="auto"></audio>
                <audio id="instruccion3" src="./assets/audio/storyboardintruccion.mp3" preload="auto"></audio>
                <!-- videos -->
                <video id="mindmap-video" src="./assets/video/mapa asosiativo.mp4" event-set__mouseenter="_event: mouseenter; play: true;"></video>
            </a-assets>

            <a-entity>
                <!-- tablero -->
                <a-image src="#D0" id="tablero" position="0 2.4 -4.5" width="7" height="4"></a-image>


                <!-- diapositiva 1 -->
                <a-entity>
                    <a-image src="#D1" position="-2.6 0.4 -2.8" width="1.2" height="0.7" onclick="show('D1')" sound="src: #instruccion1; on: click"></a-image>
                </a-entity>

                <!-- diapositiva 2 -->
                <a-entity>
                    <a-image src="#D2" position="-1.3 0.4 -2.8" width="1.2" height="0.7" onclick="show('D2')" sound="src: #instruccion2; on: click"></a-image>
                </a-entity>

                <!-- diapositiva 3 -->
                <a-entity>
                    <a-image src="#D3" position="0 0.4 -2.8" width="1.2" height="0.7" onclick="show('D3')"></a-image>                  
                </a-entity>

                <!-- diapositiva 4 -->
                <a-entity>
                    <a-image src="#D4" position="1.3 0.4 -2.8" width="1.2" height="0.7" onclick="show('D4')"></a-image>                 
                </a-entity>

                <!-- diapositiva 5 -->
                <a-entity>
                    <a-image src="#D5" position="2.6 0.4 -2.8" width="1.2" height="0.7" onclick="show('D5')" sound="src: #instruccion3; on: click"></a-image>                   
                </a-entity>
            </a-entity>

            <!-- comunication-problem -->
            <a-entity id="comunication" visible= "false">
                <!-- arriba -->
                <a-image src="#PC1" position="1.8 1.5 3"  rotation="0 210 0" width="4" height="2"></a-image>
                <a-image src="#PC2" position="-1.8 1.5 3"  rotation="0 150 0" width="4" height="2"></a-image>
            </a-entity>

            <!-- assosiativity map -->
            <a-entity id="map" visible= "false">
                <!-- <a-image src="#mindmap" position="0 2 4"  rotation="0 180 0"  width="7" height="4"></a-image> -->
                <a-video src="#mindmap-video"  width="7" height="4" position="0 2 4"  rotation="0 180 0">
                    <a-image id="videocontrols" src="#play" position="0 -0.9 3"  scale="0.1 0.1 0.1" play-pause></a-image>
                </a-video>
            </a-entity>

            <!-- storyboard -->
            <a-entity id="storyboard" visible= "false">
                <!-- arriba -->
                <a-image id="sb1" src="#SB1" position="2.7 2.5 1"  rotation="0 260 0" width="1.8" height="1"></a-image>
                <a-image id="sb2" src="#SB2" position="1.8 2.5 2.5"  rotation="0 210 0" width="1.8" height="1"></a-image>
                <a-image id="sb3" src="#D2" position="0 2.5 3"  rotation="0 180 0" width="1.8" height="1"></a-image>           
                <a-image id="sb4" src="#D2" position="-1.8 2.5 2.5"  rotation="0 150 0" width="1.8" height="1"></a-image>    
                <a-image id="sb5" src="#D2" position="-2.7 2.5 1"  rotation="0 100 0" width="1.8" height="1"></a-image>
                <!-- abajo -->
                <a-image id="sb6" src="#D2" position="2.7 1 1"  rotation="0 260 0" width="1.8" height="1"></a-image>
                <a-image id="sb7" src="#D2" position="1.8 1 2.5"  rotation="0 210 0" width="1.8" height="1"></a-image>
                <a-image id="sb8" src="#D2" position="0 1 3"  rotation="0 180 0" width="1.8" height="1"></a-image>           
                <a-image id="sb9" src="#D2" position="-1.8 1 2.5"  rotation="0 150 0" width="1.8" height="1"></a-image>    
                <a-image id="sb10" src="#D2" position="-2.7 1 1"  rotation="0 100 0" width="1.8" height="1"></a-image>

                <a-sphere id="next"  src="#arrow"   scale="0.45 0.45 0.45"  radius="0.4"  rotation="345 180 0"  position="-0.5 0 3"   material="opacity: 1" onclick="next()" visible= "true"></a-sphere>
                <a-sphere id="prev"  src="#arrow"  scale="0.45 0.45 0.45" radius="0.4"  rotation="345 180 180" position="0.5 0 3"  material="opacity: 1" onclick="previous()" visible= "false"></a-sphere>
            </a-entity>
            

            <!-- camara -->
            <a-camera>
                <!--  cursor -->
                <a-entity cursor-listener>
                    <a-cursor color=#02C700></a-cursor>
                </a-entity>     
            </a-camera>

            <!-- fondo -->
            <a-sky src="#background" ></a-sky>
        </a-scene>

        <script>

            function show(id) {
                var valor = $("#" + id).attr("alt");
                document.getElementById("tablero").setAttribute("src", "#" + id);
                $("#description").attr("value", valor);
                
                if( valor == "primera diapositiva"){
                    document.getElementById('comunication').setAttribute('visible', 'true');
                } else {
                    document.getElementById('comunication').setAttribute('visible', 'false');
                }

                if( valor == "segunda diapositiva"){
                    document.getElementById('map').setAttribute('visible', 'true');
                } else {
                    document.getElementById('map').setAttribute('visible', 'false');
                }

                if( valor == "quinta diapositiva"){
                    document.getElementById('storyboard').setAttribute('visible', 'true');
                } else {
                    document.getElementById('storyboard').setAttribute('visible', 'false');
                }
            }

            function next(){
                document.getElementById("sb1").setAttribute("src", "#D0");
                document.getElementById("sb2").setAttribute("src", "#D0");
                document.getElementById("sb3").setAttribute("src", "#D0");
                document.getElementById("sb4").setAttribute("src", "#D0");
                document.getElementById("sb5").setAttribute("src", "#D0");

                document.getElementById("sb6").setAttribute("src", "#D0");
                document.getElementById("sb7").setAttribute("src", "#D0");
                document.getElementById("sb8").setAttribute("src", "#D0");
                document.getElementById("sb9").setAttribute("src", "#D0");
                document.getElementById("sb10").setAttribute("src", "#D0");

                document.getElementById('next').setAttribute('visible', 'false');
                document.getElementById('prev').setAttribute('visible', 'true');
            }

            function previous(){
                document.getElementById("sb1").setAttribute("src", "#SB1");
                document.getElementById("sb2").setAttribute("src", "#SB2");
                document.getElementById("sb3").setAttribute("src", "#D2");
                document.getElementById("sb4").setAttribute("src", "#D2");
                document.getElementById("sb5").setAttribute("src", "#D2");

                document.getElementById("sb6").setAttribute("src", "#D2");
                document.getElementById("sb7").setAttribute("src", "#D2");
                document.getElementById("sb8").setAttribute("src", "#D2");
                document.getElementById("sb9").setAttribute("src", "#D2");
                document.getElementById("sb10").setAttribute("src", "#D2");

                document.getElementById('next').setAttribute('visible', 'true');
                document.getElementById('prev').setAttribute('visible', 'false');
            }

            AFRAME.registerComponent('play-pause', {
                init: function (){
                    var my_video = document.querySelector('#mindmap-video');
                    var videoControls =  document.querySelector('#videocontrols');
                    this.el.addEventListener('click', function (){
                        if(my_video.paused){
                            my_video.play();
                            videoControls.setAttribute('src', '#pause');
                        }else{
                            my_video.pause();
                            videoControls.setAttribute('src', '#play')
                        }
                    });
                }
            });
        </script>
    </body>
</html>
